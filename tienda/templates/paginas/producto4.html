{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <title>WalkWave</title>
</head>
<body>
    <div class="contenedor">
        <header>
            <div class="logo-titulo">
                <a href="{% url 'index' %}">
                    <h1>WalkWave</h1>
                </a>
            </div>
            <nav id="nav">
                <a href="{% url 'index' %}" class="selected">Inicio</a>
                <a href="{% url 'contacto' %}">Contacto</a>
                <span id="close-responsive">
                    <i class="fa-solid fa-xmark"></i>
                </span>
            </nav>
            <div id="nav-responsive">
                <i class="fa-solid fa-bars"></i>
            </div>
            <div class="carrito">
                <span class="total-compra"></span>
                <a href="{% url 'carrito' %}">
                    <span class="icono-carrito">
                        <i class="fa-solid fa-bag-shopping"></i>
                        <div class="total-item-carrito">0</div>
                    </span>
                </a>
            </div>
        </header>

        <section class="contenedor-seccion">
            <div class="fondo-seccion"></div>
            <div class="header-seccion">
                <div class="col">
                    <strong><span class="link-blanco">Inicio</span> / Producto Detalle</strong>
                </div>
                <div class="centro">
                    <h2>Detalle del Producto</h2>
                </div>
                <div class="col busqueda">
                    <a href="{% url 'producto3' %}">
                        <i class="fa-solid fa-arrow-left"></i>
                    </a>
                    <a href="{% url 'producto5' %}">
                        <i class="fa-solid fa-arrow-right"></i>
                    </a>
                </div>
            </div>

            <section class="detalle-producto">
                <div class="fila">
                    <div class="col izquierda">
                        <h3>Zapatillas Nike Court Vision Low Next Nature</h3>
                        <p>Las Nike Court Vision Low Next Nature son una reinvención moderna de las clásicas zapatillas de baloncesto de los años 80, combinando el estilo retro con un enfoque en la sostenibilidad.</p>
                        <div class="miniaturas">
                            <img src="{% static 'img/minishoes4.png' %}" alt="" class="mini-selected" onclick="setMini('0')">
                        </div>
                    </div>
                    <div class="col centro">
                        <div class="img-producto" id="img-producto">
                            <img src="{% static 'img/shoes4.png' %}" alt="" id="imgProducto">
                            <h3 class="precio-producto">$640.000</h3>
                        </div>
                    </div>
                    <div class="col derecha">
                        <div class="info-detalle">
                            Review:
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            4.5 (60)
                        </div>

                        <div class="info-detalle">
                            Size:
                            <button class="size-selected" onclick="setSize(0)">39</button>
                        </div>

                        <button class="btn-agregar-carrito" onclick="window.location.href='{% url 'carrito' %}'">Ir a carrito</button>
                    </div>
                </div>
            </section>

            <section class="seccion-resenas">
                <h3>Reseñas</h3>
                <div id="resenas-lista">
                </div>

                <div class="formulario-resena">
                    <h4>Deja tu reseña:</h4>

                    <div class="calificacion-estrellas">
                        <label for="estrella1"><input type="radio" name="rating" value="5" id="estrella1"> ★★★★★</label>
                        <label for="estrella2"><input type="radio" name="rating" value="4" id="estrella2"> ★★★★☆</label>
                        <label for="estrella3"><input type="radio" name="rating" value="3" id="estrella3"> ★★★☆☆</label>
                        <label for="estrella4"><input type="radio" name="rating" value="2" id="estrella4"> ★★☆☆☆</label>
                        <label for="estrella5"><input type="radio" name="rating" value="1" id="estrella5"> ★☆☆☆☆</label>
                    </div>

                    <textarea id="contenido-resena" rows="5" placeholder="Escribe tu reseña aquí..."></textarea>
                    <input type="text" id="nombre-usuario" placeholder="Tu nombre">
                    <button id="enviar-resena">Enviar Reseña</button>
                </div>
            </section>
        </section>
    </div>

    <script src="{% static 'js/app.js' %}"></script>

    <script>
        document.getElementById('enviar-resena').addEventListener('click', function() {
            const contenidoResena = document.getElementById('contenido-resena').value;
            const nombreUsuario = document.getElementById('nombre-usuario').value;
            const estrellasSeleccionadas = document.querySelector('input[name="rating"]:checked');

            if (contenidoResena && nombreUsuario && estrellasSeleccionadas) {
                const valorEstrellas = estrellasSeleccionadas.value;

                const nuevaResena = document.createElement('div');
                nuevaResena.classList.add('reseña');

                let estrellasHTML = '';
                for (let i = 0; i < valorEstrellas; i++) {
                    estrellasHTML += '★';
                }
                for (let i = valorEstrellas; i < 5; i++) {
                    estrellasHTML += '☆';
                }

                nuevaResena.innerHTML = `<strong>${nombreUsuario}:</strong><div class="estrellas">${estrellasHTML}</div><p>${contenidoResena}</p>`;

                document.getElementById('resenas-lista').appendChild(nuevaResena);

                document.getElementById('contenido-resena').value = '';
                document.getElementById('nombre-usuario').value = '';
                document.querySelector('input[name="rating"]:checked').checked = false;
            } else {
                alert('Por favor, completa todos los campos y selecciona una calificación.');
            }
        });
    </script>
</body>
</html>
